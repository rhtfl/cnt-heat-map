<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Карта заказов</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
</head>
<body>
    <div class="button-group">
        <span style="width: 100%; text-align: center; padding: 5px 0px;">Загрузка таблицы с заказами</span>
        <input type="file" id="file-input" accept=".xlsx, .xls" />
        <button id="heatmap-btn" class="active">Тепловая карта</button>
        <button id="cluster-btn">Кластеры</button>
        <button id="kml-btn">Секторы одного цвета</button>
        <button id="geojson-btn">Секторы по цветам ИМов</button>
        <button id="clear-layers-btn">Очистить все</button>
        <!-- Новая кнопка для загрузки пользовательского KML -->
        <span style="width: 100%; text-align: center; padding: 5px 0px;">Загрузка KML карты</span>
        <input type="file" id="custom-kml-input" accept=".kml" />
    </div>    
<div id="map"></div>
<div id="legend" class="legend" style="display: none;">
    <div class="legend-title">Количество заказов</div>
    <div><span class="color-box" style="background-color: #0000ff;"></span> 1-5</div>
    <div><span class="color-box" style="background-color: #00ff00;"></span> 6-10</div>
    <div><span class="color-box" style="background-color: #ffff00;"></span> 11-20</div>
    <div><span class="color-box" style="background-color: #ff0000;"></span> 21+</div>
</div>

<div id="summary" class="summary" style="display: none;">
    <b>Общее количество заказов:</b> <span id="total-orders"></span><br/>
    <b>Количество заказов ДВД:</b> <span id="dvd-1-count"></span><br/>
    <b>Количество заказов не ДВД:</b> <span id="dvd-0-count"></span><br/>
    <b>Общая сумма заказов:</b> <span id="total-amount"></span><br/>
    <!-- Контейнеры для диаграмм -->
    
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
<script src="https://unpkg.com/leaflet.heat"></script>
<script src="https://unpkg.com/leaflet-omnivore@0.3.4/leaflet-omnivore.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Подключаем Chart.js -->
<script src="script.js"></script>
</body>
</html>


